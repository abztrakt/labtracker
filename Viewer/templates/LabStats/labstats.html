{% extends "base_full.html" %}
{%load adminmedia %}


{% block heading %}Lab Statistics{% endblock %}
{%block pageCSS %}
@import url('/media_admin/css/widgets.css');
{%endblock%}


{% block pageJS %}
<script type="text/javascript">window.__admin_media_prefix__="{%filter escapejs %}{% admin_media_prefix %}{%endfilter%}"</script>
<script type="text/javascript" src="/admin/jsi18n/"></script>
    <script type="text/javascript" src="/media_admin/js/core.js"></script>
    <script type="text/javascript" src="/media_admin/js/admin/RelatedObjectLookups.js"></script>
    {{form.media}}

<script type="text/javascript">
$(document).ready(function() {
    $('#id_tags, label[for=id_tags]').hide();
    $('#id_description, label[for=id_description]').hide();
    $('#id_cache_interval').click(function() {
        if ($('#id_cache_interval').is(":checked")) {
            $('#id_tags, label[for=id_tags]').show();
            $('#id_description, label[for=id_description]').show();
        } else {
            $('#id_tags, label[for=id_tags]').hide();
            $('#id_description, label[for=id_description]').hide();
        }
    });
});
</script>
{% endblock %}
{% block pageHead %}
<style type="text/css">
.stats_table {
    border-collapse: collapse;
}
.stats_table td {
    border: #000000 1px solid;
    width: 85px;
}
</style>
{% endblock %}
{% block content %}
<a href="/views/LabStats">Archives</a>
<h3>Custom Time Frame</h3>
<p>Input the time interval as YYYY-MM-DD HH:MM:SS. (Year-Month-Day Hours:Minutes:Seconds)</p>
<form action="" method="POST">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" />
</form>
<br />
{% if message %}
<p>{{ message }}</p>
{% endif %}
{% if location_stats %}
<h3>Statistics for Custom Time Interval from {{begin}} to {{end}}</h3>
<table class="stats_table">
    <tr>
        <th>Location</th>
        <th>Logins</th>
        <th>Machines</th>
        <th>Logins per Machine</th>
        <th>Distinct Logins</th>
        <th>Distinct per Machine</th>
        <th>Average Seat Time</th>
        <th>Maximum Seat Time</th>
        <th>Std. Dev. Seat Time</th>
    </tr>
{% for data in location_stats %}
    <tr>
        <td>{{ data.location }}</td>
        <td>{{ data.total_logins }}</td>
        <td>{{ data.total_machines }}</td>
        <td>{{ data.logins_per_machine }}</td>
        <td>{{ data.distinct_logins }}</td>
        <td>{{ data.distinct_per_machine }}</td>
        <td>{{ data.avg_time }} min</td>
        <td>{{ data.max_time }} min</td>
        <td>{{ data.stdev_time }} min</td>
    </tr>
{% endfor %}
</table>
{% else %}
<h3>No Data</h3>
<p>There is no data associated with the specified time frame. Please try again.</p>
{% endif %}

{% endblock %}
